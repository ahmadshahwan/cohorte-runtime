<?xml version="1.0" encoding="UTF-8"?>
<ipojo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="org.apache.felix.ipojo http://felix.apache.org/ipojo/schemas/CURRENT/core.xsd"
	xmlns="org.apache.felix.ipojo" xmlns:jmx="org.apache.felix.ipojo.handlers.jmx">

	<!-- The remote importer service -->
	<component classname="org.psem2m.isolates.remote.importer.RemoteServiceAdapter"
		architecture="true" immediate="true" name="remote-service-importer-factory">

		<requires field="pBroadcaster" optional="false" />
		<requires field="pClientHandlers" optional="false" />
		<requires field="pRepository" optional="false" />

		<callback transition="validate" method="validatePojo" />
		<callback transition="invalidate" method="invalidatePojo" />
	</component>

	<!-- The servlet register -->
	<component classname="org.psem2m.isolates.remote.importer.ServletRegisterer"
		architecture="true" immediate="true" name="remote-service-servlet-factory">

		<!-- Do not provide the IRemoteServiceEventListener interface ! -->

		<requires field="pHttpService" optional="false" />
		<requires field="pLogger" optional="true" />

		<callback transition="validate" method="validatePojo" />
		<callback transition="invalidate" method="invalidatePojo" />
	</component>

	<!-- Instances -->
	<instance component="remote-service-importer-factory" name="remote-service-importer" />

	<!-- <instance component="remote-service-servlet-factory" name="remote-service-servlet" 
		/> -->
</ipojo>
